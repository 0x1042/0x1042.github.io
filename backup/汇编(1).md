
- [基本特征](#基本特征)
- [`hello world`](#hello-world)
- [寻址](#寻址)
  - [寄存器寻址](#寄存器寻址)
  - [立即寻址](#立即寻址)
  - [间接(内存)寻址](#间接内存寻址)
  - [索引寻址](#索引寻址)
  - [基址寻址](#基址寻址)
- [op](#op)

> `gdb` 默认的汇编风格是`AT&T` 

# 基本特征 

- 源操作数在前，目的操作数在后 
- 寄存器以`%`开头  
- 立即数以 `$`开头，即常量数


# `hello world`

```asm
movl %eax,%ebx ; 把寄存器eax的值移动到ebx寄存器
```

```asm
movl $5, %eax    ; 把立即数 5 移动到 EAX
```

# 寻址

```asm 

; 地址或偏移(%基址或偏移量寄存器,%索引寄存器,比例因子)

; dst = 地址或偏移 + %索引寄存器 * 比例因子

```

## 寄存器寻址

```asm
mov    %rax,%rdi ;把寄存器rax的值移动到rdi寄存器

; 与内存无关
; 如果rax = 0x12345678
; 那么这条指令执行结束后，rdi的值也是 0x12345678
```

## 立即寻址

```asm
mov    $0xa,%esi
; $ 表示立即数 ，0xa 即十进制的10
; 执行结束后，寄存器esi的值就是10
```

## 间接(内存)寻址 

```asm
mov     (%rip),%rdi
; rip寄存器存放的是一个内存地址
; (%rip) 表示该内存地址指向的数据
; 上述指令的是意思是 将 rip寄存器所指向的内存中的值加载到rdi寄存器中 
```

## 索引寻址

```asm
subl -0x20(%ebx, %ecx, 0x4), %eax

; eax = %ebx + (%ecx * 0x4) - 0x20
```

## 基址寻址

```asm
movsd  -0x18(%rbp),%xmm0
; 从 (rbp)地址-0x18 的内存地址读取数据，移动到xmm0 寄存器 

mov    0x2db6(%rip),%rdi
; 从 (rip)地址 + 0x2db6 的内存地址读取数据，移动到rdi 寄存器
```

# op

> 后缀表示操作数的长度

| 后缀 | 说明            | 长度(字节) | C声明                     |
| ---- | --------------- | ---------- | ------------------------- |
| `b`  | `byte`          | **1**      | `char c = 'z';`           |
| `w`  | `word`          | **2**      | `short len = 3;`          |
| `l`  | `long`          | **4**      | `int32_t val = 1024;`     |
| `q`  | `quad`          | **8**      | `uint64_t id = 42;`       |
| `sd` | `Scalar Double` | **8**      | `double p = 3.141592653;` |